gaze_data[1]
gaze_data[3]
gaze_data[4]
gaze_data[2]$info
gaze_data <- fromJSON("gaze.json")
gaze_data <- fromJSON("gaze.json",flatten = TRUE)
gaze_data <- fromJSON("gaze.json",flatten = TRUE)
id = gaze_data[1]
id
typeof(id)
id[1]
id[2]
id[[2]]
id[[1]]
typeof(id[[1]])
typeof(id[[[[1]]])
typeof(id[[[1]]])
typeof(id[[1]])
id[[1]]
id[[1]]$S
id = gaze_data$gazer_id
id
id = gaze_data$gazer_id$S
id
gaze_data <- fromJSON("gaze.json",flatten = TRUE)
timestamp = gaze_data$time_collected
id = gaze_data$gazer_id$S
timestamp = gaze_data$time_collected$S
info = gaze_data$info$M
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
gaze_data <- fromJSON("gaze.json",flatten = TRUE)
id <- gaze_data$gazer_id$S
timestamp <- gaze_data$time_collected$S
info <- gaze_data$info$M
url <-info$url
gaze_x <- info$gaze_x
gaze_y <- info$gaze_y
info <- gaze_data$info$M
gaze_data <- fromJSON("gaze.json",flatten = TRUE)
gaze_data <- fromJSON("gaze.json")
gaze_data <- fromJSON("Gazers.json")
gaze_data <- fromJSON("gaze.json")
gaze_data <- fromCSV("Gazers.csv")
gaze_data <- read.csv2 ("Gazers.csv")
id <- gaze_data$gazer_id$S
typeof(gaze_data)
gaze_data[1]
gaze_data[1]
gaze_data[1][1]
gaze_data[1][1]
gaze_data[[1]]
typeof(gaze_data[[1]])
gaze_data <- fromJSON("g.json")
rm(list=ls())
cat("\014")
graphics.off()
?read.csv2
gaze_data <- read.csv2 ("Gazers.csv",header = FALSE, sep = ",")
gaze_data <- read.csv2 ("Gazers.csv",header = FALSE, dec = ",")
gaze_data <- read.csv2 ("Gazers.csv",header = FALSE, sep = ",")
gaze_data <- read.csv2 ("Gazers.csv",header = FALSE, sep = " ")
,
gaze_data <- read.csv2 ("Gazers.csv",header = FALSE, sep = ",")
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = ",")
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = "{}")
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
id = gaze_data$gazer_id..S.[1]
timestamp <- gaze_data$time_collected..S.
info <- gaze_data$info..M.
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- gaze_data$info..M.
strsplit(info,",")
?read.csv2
fromJSON()
fromJSON
?fromJSON
info <- fromJSON(gaze_data$info..M.)
url <- info$url
url <- info$url$S
description <- info$description
description <- info$description$S
task <- info$task
task <- info$task$S
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_y <- info$gaze_y$L
object_x <- info$object_x$L
object_y <- info$object_y$L
gaze_x[0]
gaze_x[1]
gaze_x[2]
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T))
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T),stringsAsFactors=FALSE)
View(gaze_x)
View(gaze_x)
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T),stringsAsFactors=FALSE)
gaze_x <- as.numeric(gaze_x)
gaze_y <- info$gaze_y$L
gaze_y <- data.frame(matrix(unlist(gaze_y), byrow=T),stringsAsFactors=FALSE)
gaze_y <- as.numeric(gaze_y)
object_x <- info$object_x$L
object_x <- data.frame(matrix(unlist(object_x), byrow=T),stringsAsFactors=FALSE)
object_x <- as.numeric(object_x)
object_y <- info$object_y$L
object_y <- data.frame(matrix(unlist(object_y), byrow=T),stringsAsFactors=FALSE)
object_y <- as.numeric(object_y)
}
read_data("Gazers.csv")
read_data("Gazers.csv")
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T),stringsAsFactors=FALSE)
gaze_x <- as.numeric(gaze_x)
gaze_y <- info$gaze_y$L
gaze_y <- data.frame(matrix(unlist(gaze_y), byrow=T),stringsAsFactors=FALSE)
gaze_y <- as.numeric(gaze_y)
object_x <- info$object_x$L
object_x <- data.frame(matrix(unlist(object_x), byrow=T),stringsAsFactors=FALSE)
object_x <- as.numeric(object_x)
object_y <- info$object_y$L
object_y <- data.frame(matrix(unlist(object_y), byrow=T),stringsAsFactors=FALSE)
object_y <- as.numeric(object_y)
}
read_data("Gazers.csv")
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T),stringsAsFactors=FALSE)
gaze_x <- as.numeric(gaze_x)
}
read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_x <- data.frame(matrix(unlist(gaze_x), byrow=T),stringsAsFactors=FALSE)
gaze_y <- info$gaze_y$L
gaze_y <- data.frame(matrix(unlist(gaze_y), byrow=T),stringsAsFactors=FALSE)
object_x <- info$object_x$L
object_x <- data.frame(matrix(unlist(object_x), byrow=T),stringsAsFactors=FALSE)
object_y <- info$object_y$L
object_y <- data.frame(matrix(unlist(object_y), byrow=T),stringsAsFactors=FALSE)
}
read_data("Gazers.csv")
?unlist
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = ",",stringsAsFactors=FALSE)
unlist(gaze_data)
g <- unlist(gaze_data)
typeof(g)
id = gaze_data$gazer_id..S.
gaze_data <- read.csv2 ("Gazers.csv",header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- info$gaze_x$L
gaze_x <- unlist(gaze_x)
typeof(gaze_x)
gaze_x <- vector(unlist(gaze_x))
gaze_x <- unlist(gaze_x)
gaze_x[2]
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
gaze_df <- data.frame(gaze_x,gaze_y,object_x,object_y)
names(df) <- c("gaze_x","gaze_y","object_x","object_y")
names(gaze_df) <- c("gaze_x","gaze_y","object_x","object_y")
View(gaze_df)
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
gaze_df <- data.frame(gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("gaze_x","gaze_y","object_x","object_y")
}
read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
id = gaze_data$gazer_id..S.
timestamp <- gaze_data$time_collected..S.
info <- fromJSON(gaze_data$info..M.)
url <- info$url$S
description <- info$description$S
task <- info$task$S
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
gaze_df <- data.frame(gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,lengt(gaze_x))
task <- rep(info$task$S,length(gaz_x))
gaze_df <- data.frame(id,timestamp, url, description, task, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,length(gaze_x))
task <- rep(info$task$S,length(gaz_x))
gaze_df <- data.frame(id,timestamp, url, description, task, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,length(gaze_x))
task <- rep(info$task$S,length(gaze_x))
gaze_df <- data.frame(id,timestamp, url, description, task, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
View(gaze_data)
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
elapsed_time <- unlist(info$elapsedTime$L)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,length(gaze_x))
task <- rep(info$task$S,length(gaze_x))
gaze_df <- data.frame(id,timestamp, url, description, task, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
elapsed_time <- unlist(info$elapsedTime$L)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,length(gaze_x))
task <- rep(info$task$S,length(gaze_x))
gaze_df <- data.frame(id,timestamp, url, description, task, elapsed_time, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","elapsed_time",gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
rm(list=ls())
cat("\014")
graphics.off()
library(ggplot2)
library(rjson)
read_data  <- function(file){
gaze_data <- read.csv2 (file,header = TRUE, sep = ",",stringsAsFactors=FALSE)
info <- fromJSON(gaze_data$info..M.)
elapsed_time <- unlist(info$elapsedTime$L)
gaze_x <- unlist(info$gaze_x$L)
gaze_y <- unlist(info$gaze_y$L)
object_x <- unlist(info$object_x$L)
object_y <- unlist(info$object_y$L)
id = rep(gaze_data$gazer_id..S.,length(gaze_x))
timestamp <- rep(gaze_data$time_collected..S.,length(gaze_x))
url <- rep(info$url$S,length(gaze_x))
description <- rep(info$description$S,length(gaze_x))
task <- rep(info$task$S,length(gaze_x))
gaze_df <- data.frame(id,timestamp, url, description, task, elapsed_time, gaze_x,gaze_y,object_x,object_y)
names(gaze_df) <- c("id","time_stamp","url","description","task","elapsed_time","gaze_x","gaze_y","object_x","object_y")
return (gaze_df)
}
gaze_data <- read_data("Gazers.csv")
View(gaze_data)
rm(list = ls())
graphics.off()
setwd("yourpath/analysis")
library(ggplot2)
library(car)
library(ez)
library(png)
library(grid)
age = function(from, to) {
from_lt = as.POSIXlt(from)
to_lt = as.POSIXlt(to)
age = to_lt$year - from_lt$year
ifelse(to_lt$mon < from_lt$mon | (to_lt$mon == from_lt$mon & to_lt$mday < from_lt$mday), age - 1, age)
}
visAngle <- function(size, distance){
# this function calculates visual angle
# size and distance must be in the same units
Rad = 2*atan(size/(2*distance))
Ang = Rad*(180/pi)
return(Ang)
}
#visAngle(size = 22, distance = 50)
if (!file.exists("tolcam_data.R")) {
d <- NULL
dinfo <- NULL
dvalid <- NULL
dfail <- NULL
for (setting in c("inlab", "cf")) {
folders <- list.dirs(paste("../data_", setting, sep=""), recursive = F)
for (f in folders) {
# read in info files
ifile <- list.files(paste(f, "/", sep =""), pattern = "*info")
dinfo.tmp <- read.table(paste(f, ifile[1], sep="/"), header = T, stringsAsFactors = F, sep = "\t")
names(dinfo.tmp)[1] <- "subject" # this is an odd fix for some irregularities in the file format if subject entered \t or whitespace etc
if (nchar(dinfo.tmp$birthday) == 10) {
dinfo.tmp$age <- age(as.character(dinfo.tmp$birthday), Sys.Date())
} else {
dinfo.tmp$age <- dinfo.tmp$birthday
}
dinfo <- rbind(dinfo, dinfo.tmp)
# read in trial data
tfiles <- list.files(paste(f, "/", sep =""), pattern = "*trial")
d.tmp <- NULL
for (tf in tfiles) {
tmp <- read.table(paste(f, tf, sep="/"), header = T, stringsAsFactors = F)
if (length(tmp$trial_no) > 0) {
tmp$time_norm <- tmp$time - min(tmp$time)
tmp$dwell <- c(tmp[2:length(tmp$time_norm), "time_norm"] - tmp[1:length(tmp$time_norm)-1, "time_norm"], 0)
if (!("status" %in% names(tmp))) {
tmp$status <- "-"
tmp[tmp$tx == 0, "status"] <- "fixation_offset"
tmp[tmp$tx > 0, "status"] <- "stimulus_onset"
tmp[tmp$time_norm < 1500, "status"] <- "fixation_onset"
}
if (unique(tmp$task) == "simple") {
tmp$tx <- max(unique(tmp$tx))
tmp$ty <- max(unique(tmp$ty))
}
# attention: we need to fix the css translate() offset of 25 px, else tx (target_x) and ty are not correct
tmp$tx <- tmp$tx + 25
tmp$ty <- tmp$ty + 25
d.tmp <- rbind(d.tmp, tmp)
}
}
d.tmp$xmax <- dinfo.tmp$screen_width
d.tmp$ymax <- dinfo.tmp$screen_height
d.tmp$xp <- d.tmp$x / dinfo.tmp$screen_width
d.tmp$yp <- d.tmp$y / dinfo.tmp$screen_height
d.tmp$txp <- d.tmp$tx / dinfo.tmp$screen_width
d.tmp$typ <- d.tmp$ty / dinfo.tmp$screen_height
d.tmp$setting <- setting
d <- rbind(d, d.tmp)
# read in validation data
vfiles <- list.files(paste(f, "/", sep =""), pattern = "*valid")
dvalid.tmp <- NULL
for (vf in vfiles) {
dvalid.tmp <- rbind(dvalid.tmp, read.table(paste(f, vf, sep="/"), header = T, stringsAsFactors = F))
}
dvalid <- rbind(dvalid, dvalid.tmp)
# validation fail files
ffiles <- list.files(paste(f, "/", sep =""), pattern = "*fail")
dfail <- rbind(dfail, data.frame("setting" = setting, "subject" = unique(d.tmp$subject), "fails" = length(ffiles), stringsAsFactors = F))
}
}
d[d$setting == "cf", "setting"] <- "online"
d[d$setting == "inlab", "setting"] <- "in-lab"
dfail[dfail$setting == "cf", "setting"] <- "online"
dfail[dfail$setting == "inlab", "setting"] <- "in-lab"
rm(tmp)
rm(d.tmp)
rm(dinfo.tmp)
rm(dvalid.tmp)
dinfo$browser <- "other"
dinfo$browser[grepl('MSIE', dinfo$ua)] <- "IE"
dinfo$browser[grepl('Safari', dinfo$ua)] <- "Safari"
dinfo$browser[grepl('Firefox', dinfo$ua)] <- "Firefox"
dinfo$browser[grepl('Chrome', dinfo$ua)] <- "Chrome" # attention, this overwrites other items, but rightfully so!
dinfo$setting <- ""
dinfo$setting[grepl('rub', dinfo$ident)] <- "in-lab"
dinfo$setting[grepl('cf', dinfo$ident)] <- "online"
dinfo[dinfo$ident == "cf_9559045", "age"] <- "0"
dinfo[dinfo$subject == 27, "age"] <- "52" # we know that from his multiple participation; in the first he just didnt adjust the field
save(file = "tolcam_data.R", list = ls())
} else {
load("tolcam_data.R")
}
